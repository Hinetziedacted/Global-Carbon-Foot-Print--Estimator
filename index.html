<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Zone Emissions Lab Â· v0.4</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Fraunces:opsz,wght@9..144,500;9..144,600;9..144,700&display=swap" rel="stylesheet">

    <!-- Leaflet + Leaflet Draw -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.css"
    />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.js"></script>

    <script type="importmap">
      {
        "imports": {
          "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
          "react/": "https://aistudiocdn.com/react@^19.2.0/",
          "react": "https://aistudiocdn.com/react@^19.2.0"
        }
      }
    </script>
    <style>
      :root {
        --green-positive: #10b981;
        --red-negative: #ef4444;
        --accent-bright: #6ee7b7;
        --accent-dark: #14b8a6;
      }
      * { box-sizing: border-box; }
      
      /* BASE STYLES */
      body {
        margin: 0;
        font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        background: #05070a;
        color: #e5e7eb;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      .app-root {
        background: radial-gradient(circle at top, #101826 0, #020308 55%);
        min-height: 100vh;
      }
      h1, h2, h3, h4 {
        font-family: 'Fraunces', serif;
      }

      /* HERO SECTION */
      .hero {
        position: relative;
        min-height: 85vh;
        display: flex;
        align-items: center;
        padding: 4rem 10vw 5rem;
        background-image: linear-gradient( to bottom, rgba(0, 0, 0, 0.55), rgba(5, 7, 10, 1) 90% ), url("https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=1600&q=80");
        background-size: cover;
        background-position: center;
        color: #f9fafb;
      }
      .hero-overlay {
        position: absolute;
        inset: 0;
        background: radial-gradient(circle at 60% 15%, #3b82f620 0, transparent 55%);
        pointer-events: none;
      }
      .hero-inner { position: relative; max-width: 960px; }
      .hero-title-row { display: flex; gap: 0.75rem; align-items: center; margin-bottom: 1.5rem; }
      .hero-label { letter-spacing: 0.16em; text-transform: uppercase; font-size: 0.8rem; color: #e5e7eb; }
      .hero-pill { font-size: 0.72rem; padding: 0.3rem 0.7rem; border-radius: 999px; border: 1px solid #4b5563; background: rgba(15, 23, 42, 0.65); }
      .hero-heading { font-size: clamp(2rem, 5vw, 2.8rem); line-height: 1.1; margin: 0 0 1.5rem; }
      .hero-accent { color: var(--accent-bright); }
      .hero-subtitle { max-width: 620px; color: #d1d5db; margin-bottom: 2.5rem; line-height: 1.6; }
      .hero-meta-row { display: flex; flex-wrap: wrap; gap: 2rem; margin-bottom: 3rem; }
      .hero-meta-item { min-width: 180px; }
      .hero-meta-label { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.14em; color: #9ca3af; display: block; margin-bottom: 0.25rem; }
      .hero-meta-value { font-size: 0.95rem; color: #e5e7eb; }
      .hero-cta {
        padding: 0.9rem 1.8rem; border-radius: 999px; border: none;
        font-size: 0.95rem; font-weight: 500;
        background: linear-gradient(135deg, #22c55e, var(--accent-dark));
        color: #020617; cursor: pointer;
        box-shadow: 0 18px 45px rgba(16, 185, 129, 0.4);
        transition: all 0.2s ease-out;
      }
      .hero-cta:hover { transform: translateY(-2px); box-shadow: 0 22px 55px rgba(16, 185, 129, 0.5); }

      /* HOW IT WORKS SECTION */
      .how { padding: 5rem 10vw 5rem; background: radial-gradient(circle at top left, #0f172a 0, #020617 55%); }
      .how-inner { max-width: 1040px; margin: 0 auto; }
      .how h2 { font-size: 1.8rem; margin-bottom: 0.4rem; }
      .how-tagline { color: #9ca3af; margin-bottom: 2.5rem; }
      .how-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1.2rem; }
      .how-card {
        border-radius: 1rem; border: 1px solid #374151;
        background: radial-gradient(circle at top, #111827, #050816);
        padding: 1.2rem 1.4rem; font-size: 0.9rem;
      }
      .how-label { display: block; font-size: 0.75rem; letter-spacing: 0.18em; text-transform: uppercase; color: var(--accent-bright); margin-bottom: 0.75rem; }
      .how-card p { margin: 0; line-height: 1.6; color: #d1d5db; }

      /* LAB SECTION */
      .lab { padding: 5rem 6vw 6rem; }
      .lab-inner {
        max-width: 1280px; margin: 0 auto; border-radius: 2rem;
        border: 1px solid rgba(148, 163, 184, 0.4);
        background: radial-gradient(circle at top left, #020617, #020617 40%, #050816 100%);
        box-shadow: 0 30px 80px rgba(15, 23, 42, 0.9);
        padding: 2rem 2.4rem 2.4rem;
      }
      .lab-header-row { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 2rem; }
      .lab-header-row h2 { margin: 0 0 0.25rem; font-size: 1.8rem; }
      .lab-header-row p { margin: 0; font-size: 0.9rem; color: #9ca3af; }
      .lab-pill { padding: 0.4rem 1rem; border-radius: 999px; border: 1px solid #22c55e55; color: #bbf7d0; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.14em; }
      .lab-grid { display: grid; grid-template-columns: 1.4fr 1fr; gap: 1.4rem; margin-bottom: 1.4rem; }
      .lab-map-panel, .lab-controls-panel { border-radius: 1.4rem; overflow: hidden; background: #020617; border: 1px solid #1f2937; }
      .lab-controls-inner { padding: 1.5rem; }
      .lab-bottom-grid { display: grid; grid-template-columns: minmax(0, 1.5fr) minmax(0, 1fr); gap: 1.4rem; margin-top: 1.2rem; }
      .results-panel, .log-panel, .panel-placeholder, .panel-error {
        border-radius: 1.4rem; background: #020617; border: 1px solid #1f2937;
        padding: 1.5rem;
      }
      .panel-placeholder p, .panel-error p { text-align: center; color: #9ca3af; margin: 1rem 0; }
      .panel-error h4 { text-align: center; color: var(--red-negative); margin: 0 0 0.5rem; }
      .panel-title { font-size: 1.25rem; margin: 0 0 1.5rem; }

      /* GENERAL COMPONENT STYLES (DARK THEME) */
      .field-label { font-size: 0.72rem; text-transform: uppercase; letter-spacing: 0.12em; color: #9ca3af; margin-bottom: 0.5rem; display: block; }
      select, input[type="number"] {
        width: 100%; padding: 0.65rem 0.75rem; border-radius: 10px;
        border: 1px solid #374151; background: #111827;
        font-family: inherit; font-size: 0.9rem; color: #e5e7eb;
      }
      select:focus, input:focus { outline: 2px solid #22c55e80; border-color: #22c55e; }
      .button-group { display: flex; flex-direction: column; gap: 0.75rem; margin-top: 1.5rem; }
      .button-primary, .button-secondary {
        padding: 0.75rem 1rem; width: 100%; border-radius: 999px;
        font-size: 0.8rem; font-weight: 600; letter-spacing: 0.06em; text-transform: uppercase;
        cursor: pointer; transition: all 0.2s; text-align: center;
      }
      .button-primary { background: linear-gradient(135deg, #22c55e, var(--accent-dark)); color: #020617; border: 1px solid #22c55e; }
      .button-primary:hover { filter: brightness(1.1); }
      .button-primary:disabled { background: #374151; border-color: #4b5563; color: #9ca3af; cursor: not-allowed; filter: none; }
      .button-secondary { background: transparent; color: #d1d5db; border: 1px solid #4b5563; }
      .button-secondary:hover:not(:disabled) { background: #1f2937; border-color: #6b7280; }
      .button-secondary:disabled { color: #6b7280; border-color: #374151; cursor: not-allowed; }

      .preset-group { margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid #1f2937; }
      .preset-label { color: #9ca3af; margin-bottom: 1rem; }
      .checkbox-wrapper label { color: #d1d5db; }

      /* RESULTS & LOG STYLES */
      .results-card .card-title, .results-summary-headline { color: #f9fafb; }
      .results-header-info { color: #9ca3af; }
      .tab-button { color: #9ca3af; }
      .tab-button.active { color: var(--accent-bright); border-bottom-color: var(--accent-bright); }
      .results-table th { color: #9ca3af; border-bottom-color: #1f2937; }
      .results-table td { color: #e5e7eb; }
      .results-table tr:last-child td { border-top-color: #1f2937; }
      .delta-negative { color: var(--green-positive); }
      .delta-positive { color: var(--red-negative); }
      .quality-pill { border: 1px solid; }
      .quality-Q1 { background: rgba(16, 185, 129, 0.1); color: #6ee7b7; border-color: rgba(16, 185, 129, 0.5); }
      .quality-Q2 { background: rgba(245, 158, 11, 0.1); color: #fcd34d; border-color: rgba(245, 158, 11, 0.5); }
      .quality-Q3 { background: rgba(239, 68, 68, 0.1); color: #fca5a5; border-color: rgba(239, 68, 68, 0.5); }
      .scenario-bar-wrapper { background: #111827; }
      .scenario-bar-zeroline { background-color: #4b5563; }
      .log-card { border-color: #374151; }
      .log-card:hover { background: #111827; border-color: #6b7280; }
      .log-card-header { color: #6b7280; }
      .log-card-body { color: #9ca3af; border-left-color: #374151; }
      
      /* LEAFLET DARK THEME */
      #map { width: 100%; height: 100%; min-height: 500px; background: #111827; }
      .leaflet-draw-toolbar a { background-image: url('https://unpkg.com/leaflet-draw@1.0.4/dist/images/spritesheet-2x.png'); background-size: 270px 30px; }
      .leaflet-container { background: #111827; }
      .leaflet-popup-content-wrapper, .leaflet-popup-tip { background: #1f2937; color: #e5e7eb; border: 1px solid #4b5563; }
      .leaflet-control-layers, .leaflet-bar { background: #1f2937; border: 1px solid #4b5563; color: #e5e7eb; }
      .leaflet-bar a, .leaflet-bar a:hover { background-color: #374151; color: #e5e7eb; }
      .leaflet-bar a:hover { background-color: #4b5563; }
      .leaflet-draw-actions a { background-color: #374151 !important; color: #e5e7eb !important; }
      .leaflet-draw-actions a:hover { background-color: #4b5563 !important; }

      @media (max-width: 1024px) {
        .lab-grid, .lab-bottom-grid { grid-template-columns: 1fr; }
        .lab-map-panel, #map { min-height: 400px; }
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>